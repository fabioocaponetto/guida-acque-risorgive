<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Guida - Acque Risorgive</title>
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
    <link rel="stylesheet" href="style.css">

    <link href="https://fonts.googleapis.com/css2?family=Archivo:wght@400;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+3:ital@0;1&display=swap" rel="stylesheet">
</head>
<body>
    <div class="home">
            <div class="header-home">
                <div id="consorzio">Guida alla scoperta delle aree d'interesse</div>
                <div id="consorzio2">© 2025 Consorzio Acque Risorgive</div>
                <!-- <div id="consorzio3"></div> -->
            </div>
            <div class="griglia">
                <div class="frase">
                    <a>
                        <div class="linea">Tutela dell’acqua, cura del territorio,</div>
                        <div class="linea">valore per le persone.</div>
                        <div class="linea"></div>
                    </a>
                </div>
                <div class="link">
                    <div class="bottoni-scroll">
                        <div id="cosa-facciamo2">
                            <a><u>Cosa facciamo</u><br><br><em style="font-size: medium; color: gray">Approfondisci il lavoro svolto dal consorzio.</em></a>
                            <img src="img/freccia giu nera.svg" id="simbolo-paragrafo"></img>
                        </div>
                        <div id="contattaci2">
                            <a><u>Contattaci</u><br><br><em style="font-size: medium; color:gray">Prenota la tua visita guidata.</em></a>
                            <img src="img/freccia giu nera.svg" id="simbolo-paragrafo2"></img>
                        </div>
                        <div class="esplora-mappa">
                            <a><code>ESPLORA LE AREE QUALIFICATE</code></a>
                        <img src="img/area_mappa.png" id="area_mappa">
                    </div>

                    </div>
                </div>
            </div>
        <div id="map-anchor1"></div>
    </div>

    <div class="info-container">
        <div class="info-consorzio">
            <div class="img-info-consorzio" style="font-size: x-small; color: rgb(160, 160, 160);"><img src="img/cover.jpeg" id="img-info-consorzio">© Acque Risorgive - Riqualificazione ambientale diffusa 2020<br>Bacino fluviale del Fiume Zero - Quarto d'Altino (VE)</div>
            <div class="testo-info-consorzio"><a style="font-size: large;"><strong>IL CONSORZIO</strong></a><br><br>
                <p>Il consorzio delle <strong>Acque Risorgive</strong> opera su un’ampia area del Veneto, dove si occupa della riqualificazione ambientale legata ai corsi d’acqua.</p>
                <p>Il suo intervento è duplice dato che da un lato lavora sulle strutture idriche, dall’altro si prende cura degli <strong>ecosistemi</strong> e degli habitat naturali.</p>
                <p>Attraverso azioni mirate, riesce a unire il ripristino della capacità dei fiumi con la valorizzazione di:</p>
                    <p><strong>→</strong> Zone umide<br>
                        <strong>→</strong> Oasi naturalistiche<br>
                        <strong>→</strong> Aree rinaturalizzate</p>
                <p>Un approccio che non solo tutela la biodiversità, ma porta <strong>benefici reali e duraturi</strong> alla collettività e alle generazioni future.</p>
                <p style="color: gray">✤ Premio Sviluppo Sostenibile – Fiera Ecomondo</p>
            </div>
        </div>
        <div class="linea-titolo"></div>
        <div class="info-consorzio">
            <div class="testo-info-territorio"><a style="font-size: large;"><strong>COM’È STRUTTURATO IL TERRITORIO</strong></a><br><br>
                <p>Il consorzio svolge il suo lavoro nella zona centrale del Veneto tra Venezia, Treviso e Padova e mantiene un <strong>rapporto diretto</strong> e costante con la cittadinanza.</p>
                <p>Il territorio di competenza è <strong>molto esteso</strong> e comprende aree diverse tra loro, spesso complesse da gestire per caratteristiche ambientali, idrauliche e paesaggistiche.</p>
                <p style="color: gray">Le aree sono divise in 6 diverse Unità Territoriali Omogenee.</p>
                <p>Le UTO sono zone geografiche che presentano <strong>caratteristiche idrauliche e agronomiche simili</strong> e sono fondamentali per la gestione efficiente dell'acqua e per gli ecosistemi.</p>
            </div>
            <div class="img-info-territorio" style="font-size: x-small; color: rgb(160, 160, 160);"><img src="img/mappa_UTO.png" id="img-info-territorio">© Acque Risorgive - Bilancio Consorzio 2021-2023<br>Divisione Unità Territoriali Omogenee (UTO) del consorzio</div>
        </div>
        <div class="info-territorio">
            <div class="riquadro tooltipinfo active">
                <code>101.592<br><a style="font-size: medium">ETTARI</a>
                <span class="tooltipinfotext" style="font-size: small">≈72.000 campi da calcio</span></code>
            </div>
            <div class="riquadro tooltipinfo">
                <code>3<br><a style="font-size: medium">PROVINCE</a>
                <span class="tooltipinfotext" style="font-size: small">Venezia, Treviso e Padova</span></code>
            </div>
            <div class="riquadro tooltipinfo">
                <code>52<br><a style="font-size: medium">COMUNI</a>
                <span class="tooltipinfotext" style="font-size: small">divisi in 6 Unità Territoriali</span></code>
            </div>
            <div class="riquadro tooltipinfo">
                <code>700.000<br><a style="font-size: medium">PERSONE</a>
                <span class="tooltipinfotext" style="font-size: small">abitano nell'area del consorzio</span></code>
            </div>
            <div class="riquadro tooltipinfo">
                <code>2.350km<br><a style="font-size: medium">DI RETE IDRAULICA</a>
                <span class="tooltipinfotext" style="font-size: small">≈A/R da Venezia a Palermo</span></code>
            </div>
            <div class="riquadro tooltipinfo">
                <code>+1.100<br><a style="font-size: medium">MANUFATTI IDRAULICI</a>
                <span class="tooltipinfotext" style="font-size: small">per gestire il flusso dei corsi</span></code>
            </div>
        </div>
        <div class="attivita">
            <div class="frase-attivita"><a style="font-size: large"><strong>LE ATTIVITÀ DEL CONSORZIO</strong></a></div>
            <div class="frase-attivita">
                <p>Il consorzio utilizza le <strong>Nature-Based Solutions</strong> per realizzare interventi che proteggano il territorio in modo naturale e sostenibile.</p>
                <p>Questa tecnica permette di migliorare la qualità dell’acqua, ridurre il rischio di alluvioni e favorire la biodiversità, sfruttando i <strong>processi naturali</strong> invece di opere artificiali invasive.</p>
                <p>In questo modo, ogni intervento non solo risolve problemi ambientali, ma crea <strong>benefici duraturi</strong> per l’ambiente e per la comunità del consorzio.</p>
            </div>
            <div class="lavori-principali">
                <div class="argini">
                    <div>
                        <div class="contenuto-argini">
                            <a id="tit-argini" style="font-size: medium; border: 1px solid black; background-color: #e0e73f; padding: 5px 10px; color: black;"><code>RIPRISTINO DEGLI ARGINI</code></a>
                            <div id="freccia-argini">
                                <img src="img/freccia giu nera.svg" style="width: 30px; height: 30px;transform: rotate(-45deg)">
                            </div>
                        </div>
                        <div id="testo-argini">
                            <div>
                                <p>Gli argini artificiali, costruiti in passato con forma trapezoidale, fanno salire il livello del fiume in verticale.<br>
                                Il consorzio interviene per ristabilire una sponda naturale, <strong>più estesa e vegetata</strong>, dove l’acqua può espandersi in orizzontale, drenando lentamente e in sicurezza.</p>   
                            </div>
                        </div>
                    </div>
                    <div id="crediti-img-argini">
                        <div class="crediti-testo" style="font-size: x-small; color: rgb(160, 160, 160); width: 50%; height: 100%; align-self: flex-end;"><img src="img/bosco di mestre pre.png" id="img-info-consorzio">© Acque Risorgive - Riqualificazione fluviale 2021<br>Riqualificazione ambientale dei collettori consortili del Bosco di Mestre</div>
                        <div class="crediti-testo" style="font-size: x-small; color: rgb(160, 160, 160); width: 50%; height: 100%; align-self: flex-end;"><img src="img/bosco di mestre post.png" id="img-info-consorzio">© Acque Risorgive - Riqualificazione fluviale 2021<br>Riqualificazione ambientale dei collettori consortili del Bosco di Mestre</div>
                    </div>
                </div>
                <div class="fitodepurazione">
                    <div>
                        <div class="contenuto-fitodepurazione">
                            <a id="tit-fitodepurazione" style="font-size: medium; border: 1px solid black; background-color: #e0e73f; padding: 5px 10px; color: black;"><code>BACINI DI FITODEPURAZIONE</code></a>
                            <div id="freccia-fitodepurazione">
                                <img src="img/freccia giu nera.svg" style="width: 30px; height: 30px; transform: rotate(-45deg);">
                            </div>
                        </div>
                        <div id="testo-fitodepurazione">
                            <div>
                                <p>Grandi aree in cui l’acqua viene rallentata e depurata naturalmente grazie alla vegetazione.<br>
                                Il consorzio progetta bacini artificiali che diventano <strong>oasi naturali</strong>, dove l’acqua può restare a lungo, migliorando la qualità ambientale e prevenendo le esondazioni.</p>    
                            </div>
                        </div>
                    </div>
                    <div id="crediti-img-fitodepurazione">
                        <div class="crediti-testo" style="font-size: x-small; color: rgb(160, 160, 160); width: 50%; height: 100%; align-self: flex-end;"><img src="img/lycena pre.png" id="img-info-consorzio">© Acque Risorgive - Riqualificazione fluviale 2021<br>Riqualificazione ambientale dell'Oasi Lycaena - Ex Cave Villetta di Salzano</div>
                        <div class="crediti-testo" style="font-size: x-small; color: rgb(160, 160, 160); width: 50%; height: 100%; align-self: flex-end;"><img src="img/lycena post.png" id="img-info-consorzio">© Acque Risorgive - Riqualificazione fluviale 2021<br>Riqualificazione ambientale dell'Oasi Lycaena - Ex Cave Villetta di Salzano</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="specie">
            <div class="grafico-specie">
                <p id="testo-grafico-specie"><a style="color: black;">Il grafico rappresenta il numero di specie a rischio per ogni oasi naturale.</a><br>Con l’aumento delle oasi naturali, sono cresciuti anche i controlli delle associazioni per la tutela delle specie a rischio, che monitorano la loro presenza area per area.</p>
                <div class="flourish-embed flourish-chart" data-src="visualisation/23027874">
                    <div class="inline-gradient-text absolute-gradient">
                        <span class="etichetta-sx">SPECIE CON MINOR PREOCCUPAZIONE</span>
                        <span class="gradient-line"></span>
                        <span class="etichetta-dx">IN PERICOLO CRITICO</span>
                    </div>
                    <script src="https://public.flourish.studio/resources/embed.js"></script><noscript><img src="https://public.flourish.studio/visualisation/23027874/thumbnail" width="100%" alt="chart visualization" /></noscript>
                </div>
                <div class="img-info-territorio" style="font-size: x-small; color: rgb(160, 160, 160); padding-right: 1%;">© Acque Risorgive - Bilancio Consorzio 2021-2023<br>Conteggio specie a rischio per le aree del Consorzio</div>
            </div>
        </div>
        <div class="linea-titolo"></div>
        <div class="biodiversita">
            <div class="testo-biodiversita"><a style="font-size: large;"><strong>LA BIODIVERSITÀ</strong></a><br><br>
                <p>Le aree curate dal consorzio ospitano oggi <strong>numerose specie</strong> di flora e fauna, alcune delle quali migratorie o rare.</p>
                <p>Luoghi un tempo inospitali sono diventati veri e propri <strong>hotspot di biodiversità</strong>, ideali anche per attività di osservazione e fotografia naturalistica.</p>
                <p style="color:gray">Sempre più cittadini partecipano a progetti di citizen science, riconoscendo e segnalando le specie osservate grazie ad app come iNaturalist.</p>
            </div>
            <div class="carosello-img">
                <div class="img-biodiversita">
                    <button id="prev" class="carosello-btn carosello-btn-sinistra">
                        <img src="img/freccia indietro blu.svg" id="indietro-carosello">
                    </button>

                    <button id="next" class="carosello-btn carosello-btn-destra">
                        <img src="img/freccia avanti blu.svg" id="avanti-carosello">
                    </button>
            
                    <div class="contenitore-immagini">
                        <img id="prev-preview" class="preview-img sinistra" src="" alt="Prev Preview">
                        <div id="immagine-principale-container">
                            <img id="carousel-img" class="immagine-principale" src="" alt="Biodiversità">

                            <div class="info-container-img">
                                <div id="info-img" class="info-img"></div>
                                <div class="crediti-testo">
                                    © iNaturalist - 2025<br>
                                    Immagini scattate all'interno delle aree naturali del Consorzio delle Acque Risorgive
                                </div>
                            </div>
                        </div>
                        <img id="next-preview" class="preview-img destra" src="" alt="Next Preview">
                    </div>
                </div>
            </div>
        </div>
                        

        <div class="linea-titolo" style="margin-top: 3%;"></div>
    </div>

    <div class="footer">
        <div class="loghi">
            <div id="acque-risorgive"><a>Acque Risorgive<br>Consorzio di bonifica</a></div>
            <img src="img/anbi_veneto.png" id="logo-anbi">
        </div>
        <div class="contatti">
            <div class="numero">
                <a id="titoletto-footer">numero</a><br>
                    <a id="descr-footer">+39 041 545 9111</a>
            </div>
            <div class="mail">
                <div id="mail-testo">
                    <!-- <a><u>Contatti</u></a><br><br> -->
                    <a id="titoletto-footer">sede</a><br>
                    <a id="descr-footer"> via Rovereto, 12 - 30174 - Venezia</a><br><br>
                    <a id="titoletto-footer">email</a><br>
                    <a id="descr-footer"> consorzio@acquerisorgive.it</a><br><br>
                    <a id="titoletto-footer">p.e.c.</a><br>
                    <a id="descr-footer"> consorzio@pec.acquerisorgive.it</a>
                </div>
                <div id="numeri-testo">
                    <!-- <a><u>Numeri di emergenza</u></a><br><br> -->
                    <a id="titoletto-footer">Venezia</a><br>
                    <a id="descr-footer">+39 335 7489972</a><br><br>
                    <a id="titoletto-footer">Mirano</a><br>
                    <a id="descr-footer">+39 348 6015269</a>
                </div>
            </div>
        </div>
        <div>
            <img src="img/freccia giu blu.svg" href="#" class="back-to-top">
        </div>
    </div>


<script>
    function scrollToWithOffset(id, offset) {
        const element = document.getElementById(id);
        if (!element) return;

        const y = element.getBoundingClientRect().top + window.pageYOffset + offset;
        window.scrollTo({ top: y, behavior: 'smooth' });
    }

    const infoContainer = document.querySelector('.info-container');
    const home = document.querySelector('.home');
    const footer = document.querySelector('.footer');

    function inserisciSeNonPresente(element) {
        if (!element.parentNode) {
            footer.parentNode.insertBefore(element, footer);
        }
    }

    document.getElementById('cosa-facciamo2').addEventListener('click', function () {
        // Nascondi mappa, mostra info
        inserisciSeNonPresente(infoContainer);
        infoContainer.style.display = 'block';
        footer.style.display = 'flex';

        scrollToWithOffset('map-anchor1', -50);
    });

    document.querySelector('.esplora-mappa').addEventListener('click', function () {
        window.location.href = 'mappa.html';
    });

    document.getElementById('contattaci2').addEventListener('click', function () {
        // Nascondi mappa, mostra info
        inserisciSeNonPresente(infoContainer);
        infoContainer.style.display = 'none';
        footer.style.display = 'flex';

        scrollToWithOffset('map-anchor1', -10);
    });

    document.querySelector('.back-to-top').addEventListener('mouseenter', function () {
        document.querySelector('.back-to-top').style.backgroundColor = '#1f18c0';
        document.querySelector('.back-to-top').setAttribute("src", "img/freccia giu bianca.svg");
    });

    document.querySelector('.back-to-top').addEventListener('mouseleave', function () {
        document.querySelector('.back-to-top').style.backgroundColor = '#f7f7f7';
        document.querySelector('.back-to-top').setAttribute("src", "img/freccia giu blu.svg");
    });

    document.querySelector('.back-to-top').addEventListener('click', function (e) {
        e.preventDefault(); // evita il comportamento predefinito del link
        window.scrollTo({
            top: 0,
            behavior: 'smooth' // per uno scroll fluido
        });
    });



    let lastDrawTime = 0;
    const drawDelay = 50;
    const homeContainer = document.querySelector('.home'); // sistemato il selettore

    const animatedImage = (event) => {
        const now = Date.now();
        if (now - lastDrawTime < drawDelay) return;
        lastDrawTime = now;

        // Verifica se il mouse è sopra home
        const bounds = homeContainer.getBoundingClientRect();
        if (
            event.clientX < bounds.left ||
            event.clientX > bounds.right ||
            event.clientY < bounds.top ||
            event.clientY > bounds.bottom
        ) {
            return;
        }

        // Crea immagine casuale
        const img = document.createElement('img');
        const randomIndex = Math.floor(Math.random() * 169) + 1;
        img.src = `img/img_video/immagine${randomIndex}.png`;
        img.classList.add('animated-img');
        
        img.style.left = (event.clientX+10) + "px";
        img.style.top = (event.clientY+10) + "px";

        const randomScale = 0.3 + Math.random() * 0.1;
        img.style.transformOrigin = "top left";
        img.style.transform = `scale(${randomScale})`;

        document.body.appendChild(img);

        setTimeout(() => {
            img.style.opacity = '0'; // innesca la transizione
            setTimeout(() => {
                img.remove(); // rimuove dopo che è svanita
            }, 300); // tempo uguale alla durata della transizione CSS
        }, 0);
    };

    window.addEventListener("mousemove", animatedImage);

    document.querySelector('.esplora-mappa').addEventListener('mouseenter', function () {
        document.querySelector('.esplora-mappa a').style.backgroundColor = 'black'
        document.querySelector('.esplora-mappa img').style.transform = 'scale(1.2)'
        document.querySelector('.esplora-mappa img').style.opacity = '0.9'
    });

    document.querySelector('.esplora-mappa').addEventListener('mouseleave', function () {
        document.querySelector('.esplora-mappa a').style.backgroundColor = '#1f18c0'
        document.querySelector('.esplora-mappa img').style.transform = 'scale(1)'
        document.querySelector('.esplora-mappa img').style.opacity = '1'
    });

    document.querySelector('#consorzio').addEventListener('click', () => {
        window.location.href = 'index.html';
    });

    document.querySelector('#cosa-facciamo2').addEventListener('mouseenter', function () {
        document.querySelector('#cosa-facciamo2').classList.add("attivo");
        document.querySelector('#cosa-facciamo2 a').style.color = '#f7f7f7'
        document.querySelector('#simbolo-paragrafo').setAttribute ("src", "img/freccia giu gialla.svg");
        document.querySelector('#simbolo-paragrafo').classList.add("show");
    });

    document.querySelector('#cosa-facciamo2').addEventListener('mouseleave', function () {
        document.querySelector('#cosa-facciamo2').classList.remove("attivo");
        document.querySelector('#cosa-facciamo2 a').style.color = 'black'
        document.querySelector('#simbolo-paragrafo').setAttribute ("src", "img/freccia giu nera.svg");
        document.querySelector('#simbolo-paragrafo').classList.remove("show");
    });

    document.querySelector('#contattaci2').addEventListener('mouseenter', function () {
        document.querySelector('#contattaci2').classList.add("attivo");
        document.querySelector('#contattaci2 a').style.color = '#black'
        document.querySelector('#simbolo-paragrafo2').setAttribute ("src", "img/freccia giu blu.svg");
        document.querySelector('#simbolo-paragrafo2').classList.add("show");
    });

    document.querySelector('#contattaci2').addEventListener('mouseleave', function () {
        document.querySelector('#contattaci2').classList.remove("attivo");
        document.querySelector('#contattaci2 a').style.color = 'black'
        document.querySelector('#simbolo-paragrafo2').setAttribute ("src", "img/freccia giu nera.svg");
        document.querySelector('#simbolo-paragrafo2').classList.remove("show");
    });

    const riquadri = document.querySelectorAll('.riquadro');

    riquadri.forEach((el) => {
        el.addEventListener('mouseenter', () => {
        riquadri.forEach(r => r.classList.remove('active')); // disattiva tutti
        el.classList.add('active'); // attiva solo quello su cui si passa il mouse
        });
    });

    function calcolaAltezzaVisibile() {
        const lavoriPrincipali = document.querySelector('.lavori-principali');
        const clone = lavoriPrincipali.cloneNode(true);

        // Rendi visibili tutti i contenuti per la misurazione
        clone.style.position = 'absolute';
        clone.style.visibility = 'hidden';
        clone.style.display = 'flex';
        clone.style.top = '-9999px';
        clone.style.left = '-9999px';
        clone.style.height = 'auto';

        // Forza la visibilità di eventuali elementi figli che erano nascosti
        const figli = clone.querySelectorAll('*');
        figli.forEach(el => {
            el.style.display = 'flex';
        });

        document.body.appendChild(clone);

        const style = window.getComputedStyle(clone);
        const margineSuperiore = parseInt(style.marginTop);
        const margineInferiore = parseInt(style.marginBottom);
        const altezza = clone.offsetHeight + margineSuperiore + margineInferiore + 120;
        console.log("altezza lavori "+altezza)

        document.body.removeChild(clone);

        return altezza;
    }


    const argini = document.querySelector('.argini');
    const fitodepurazione = document.querySelector('.fitodepurazione');
    const testoArgini = document.getElementById('testo-argini');
    const testoFitodepurazione = document.getElementById('testo-fitodepurazione');
    const frecciaArgini = document.getElementById('freccia-argini');
    const frecciaFitodepurazione = document.getElementById('freccia-fitodepurazione');
    const imgArgini = document.getElementById('crediti-img-argini');
    const imgFitodepurazione = document.getElementById('crediti-img-fitodepurazione');
    const titArgini = document.getElementById('tit-argini');
    const titFitodepurazione = document.getElementById('tit-fitodepurazione');

    const divs = [argini, fitodepurazione];

    // Funzione per cambiare freccia al passaggio del mouse
    function setupHover(div, freccia, imgNormale, imgHover) {
        div.addEventListener('mouseenter', () => {
            if (!div.classList.contains('attivo')) {
                freccia.querySelector('img').src = imgHover;
            }
        });

        div.addEventListener('mouseleave', () => {
            if (!div.classList.contains('attivo')) {
                freccia.querySelector('img').src = imgNormale;
            }
        });
    }

    let altezzaFissata = false;
    let altezzaPrecalcolata = calcolaAltezzaVisibile();

    const lavoriPrincipali = document.querySelector('.lavori-principali');

    window.addEventListener('load', () => {
        if (!altezzaFissata) {
            lavoriPrincipali.style.height = `170px`;
        }
    });



divs.forEach(div => {
    div.addEventListener('click', () => {
        const lavoriPrincipali = document.querySelector('.lavori-principali');


        if (!altezzaFissata) {
            lavoriPrincipali.style.height = `${altezzaPrecalcolata}px`;
            altezzaFissata=true;
        }

            // Solo ora puoi rendere visibili i contenuti
            testoArgini.style.display = 'flex';
            imgArgini.style.display = 'flex';
            testoFitodepurazione.style.display = 'flex';
            imgFitodepurazione.style.display = 'flex';
            frecciaArgini.style.display = 'block';
            frecciaFitodepurazione.style.display = 'block';


        // Anima larghezza e attivo
        divs.forEach(d => {
            d.style.transition = "width 0.5s ease, background-color 0.2s";
            d.style.width = d === div ? '80%' : '20%';
            d.classList.toggle('attivo', d === div);
        });

        // Mostra il contenuto prima di misurare
        if (div === argini) {
            testoArgini.style.opacity = '1';
            imgArgini.style.opacity = '1';
            testoFitodepurazione.style.opacity = '0';
            imgFitodepurazione.style.opacity = '0';
        } else if (div === fitodepurazione) {
            testoArgini.style.opacity = '0';
            imgArgini.style.opacity = '0';
            testoFitodepurazione.style.opacity = '1';
            imgFitodepurazione.style.opacity = '1';
        }

        // Colori e frecce
        if (div === argini) {
            frecciaArgini.querySelector('img').src = 'img/freccia giu nera.svg';
            frecciaArgini.style.opacity = '0';
            frecciaFitodepurazione.style.opacity = '1';
            titArgini.style.backgroundColor = "#1f18c0";
            titArgini.style.color = "#f7f7f7";
            titFitodepurazione.style.backgroundColor = "#e0e73f";
            titFitodepurazione.style.color = "black";
        } else if (div === fitodepurazione) {
            frecciaFitodepurazione.querySelector('img').src = 'img/freccia giu nera.svg';
            frecciaFitodepurazione.style.opacity = '0';
            frecciaArgini.style.opacity = '1';
            titArgini.style.backgroundColor = "#e0e73f";
            titArgini.style.color = "black";
            titFitodepurazione.style.backgroundColor = "#1f18c0";
            titFitodepurazione.style.color = "#f7f7f7";
        }
    });
});


    // Setto gli eventi hover per cambiare immagine
    setupHover(argini, frecciaArgini, 'img/freccia giu nera.svg', 'img/freccia giu bianca.svg');
    setupHover(fitodepurazione, frecciaFitodepurazione, 'img/freccia giu nera.svg', 'img/freccia giu bianca.svg');

    // document.querySelector('#esplora-mappa2').addEventListener('click', () => {
    //     window.location.href = 'mappa.html';
    // });


async function caricaDatiCSV() {
    const response = await fetch('data/iNaturalist_aree.csv');
    const data = await response.text();

    const righe = data.trim().split('\n').slice(1);
    const immagini = righe.map(riga => {
        const [id, immagine, data_avvistamento, image_url, latitude, longitude, nome_regno, nome_scientifico, nome_comune, nome_famiglia, luogo, nome_breve] = riga.split(',');
        return { id, immagine, data_avvistamento, image_url, latitude, longitude, nome_regno, nome_scientifico, nome_comune, nome_famiglia, luogo, nome_breve };
    });

    immagini.sort(() => Math.random() - 0.5);
    return immagini;
}

async function initCarousel() {
    const immagini = await caricaDatiCSV();

    let currentImage = 0;
    const carouselImg = document.getElementById('carousel-img');
    const prevPreview = document.getElementById('prev-preview');
    const nextPreview = document.getElementById('next-preview');
    const infoImg = document.getElementById('info-img');
    const nextBtn = document.getElementById('next');
    const prevBtn = document.getElementById('prev');

    function aggiornaCarosello() {
        const imgData = immagini[currentImage];
        carouselImg.src = carouselImg.src = imgData.image_url;
        infoImg.innerHTML = `
            <a style="font-size: medium; border: 1px solid black; background-color: #e0e73f; padding: 5px 10px; color: black;"><code>${imgData.nome_comune}</code></a>
            <p style="font-size: medium;">
                <code>${imgData.nome_scientifico}</code><br>
                <code>Famiglia:<strong> ${imgData.nome_famiglia}</strong></code><br>
            <code>${imgData.data_avvistamento} | ${imgData.luogo}</code></p>
        `;

        const prevIndex = (currentImage - 1 + immagini.length) % immagini.length;
        const nextIndex = (currentImage + 1) % immagini.length;
        prevPreview.src = immagini[prevIndex].image_url;
        nextPreview.src = immagini[nextIndex].image_url;
    }

    nextBtn.addEventListener('click', () => {
        currentImage = (currentImage + 1) % immagini.length;
        aggiornaCarosello();
    });

    prevBtn.addEventListener('click', () => {
        currentImage = (currentImage - 1 + immagini.length) % immagini.length;
        aggiornaCarosello();
    });

    aggiornaCarosello();
}

initCarousel();

document.querySelector('#indietro-carosello').addEventListener('mouseenter', function () {
    document.querySelector('#indietro-carosello').style.backgroundColor = '#1f18c0'
    document.querySelector('#indietro-carosello').setAttribute("src", "img/freccia indietro bianca.svg")
});

document.querySelector('#indietro-carosello').addEventListener('mouseleave', function () {
    document.querySelector('#indietro-carosello').style.backgroundColor = '#f7f7f7'
    document.querySelector('#indietro-carosello').setAttribute("src", "img/freccia indietro blu.svg")
});

document.querySelector('#avanti-carosello').addEventListener('mouseenter', function () {
    document.querySelector('#avanti-carosello').style.backgroundColor = '#1f18c0'
    document.querySelector('#avanti-carosello').setAttribute("src", "img/freccia avanti bianca.svg")
});

document.querySelector('#avanti-carosello').addEventListener('mouseleave', function () {
    document.querySelector('#avanti-carosello').style.backgroundColor = '#f7f7f7'
    document.querySelector('#avanti-carosello').setAttribute("src", "img/freccia avanti blu.svg")
});





</script>

</body>
</html>
